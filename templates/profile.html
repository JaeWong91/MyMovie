{% extends "base.html" %}
{% block content %}

    <div class="row">
        <div class="col s12 m6 offset-m3">
            <div class="">
                <h3 class="center-align">
                    {{ username }}'s Profile
                </h3>
            </div>
        </div>
        <div class="col s12 m6 offset-m3">
            <div class="">
                <h4 class="center-align">
                    Your Reviews
                </h4>
            </div>
        </div>
    </div>


    
        {% for review in reviews %}
                {% if review.by_user == session.user %}
                <div class="center-align container review-item blue-grey darken-3 white-text">
                    <p>Movie: <b>{{ review.movie_name }}</b></p>
                    <a href="{{ url_for('movie_page', movie_name=review.movie_name ) }}">Go to Movie</a><!-- TRY TO GET THIS TO REDIRECT TO THE MOVIE PAGE -->
                    <p>Rating: {{ review.review_rating }} out of 10</p>
                    <p>"{{ review.review_description }}"</p>
                    <p><em>Review Date: {{ review.review_date }}</em> by <b>{{ review.by_user }}</b></p>
                    <!-- REMOVE THE REVIEWED BY HERE ON PROFILE PAGE!! -->
                    <div class="row">
                        <a href="{{ url_for('edit_review', review_id=review._id ) }}" class="btn-small">Edit Review</a>

                        <!-- Modal Trigger for deleting review-->
                        <button data-target="#confirm-delete-{{ review._id }}" class="red waves-effect waves-light btn-small modal-trigger">Delete Review</button> <!--add this myself-->
                        <!-- Modal Structure -->
                        <div id="#confirm-delete-{{ review._id }}" class="modal blue-grey lighten-4 red-text center-align"> <!-- CONFIRM DELETE -->
                            <div class="modal-content">
                                <h4><b>WARNING</b></h4>
                                <h5>Are you sure you wish to delete your review for <b>{{ review.movie_name }}</b>:
                                    <br> "{{ review.review_description }}" ?
                                    <br><br>This action is irreversible.
                                </h5>
                            </div>
                            <div class=" center-align">
                                <a href="#!" class="modal-close waves-effect waves-green btn-small">CANCEL</a>
                                <a href="{{ url_for('delete_review', review_id=review._id ) }}" 
                                    class="btn-small red">Delete Review</a>
                            </div>
                        </div>

                        <!-- <a href="{{ url_for('delete_review_profile', review_id=review._id ) }}" class="btn-small">Delete Review</a>  THIS IS WORKING SO DONT DELETE-->
                    </div>
                </div>
                {% endif %}
        {% endfor %}
    

{% endblock %}